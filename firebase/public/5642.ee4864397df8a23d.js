"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5642],{5642:(U,Z,c)=>{c.r(Z),c.d(Z,{MostrarPageModule:()=>I});var v=c(6814),t=c(95),i=c(9810),f=c(1147),u=c(5861),h=c(203),a=c(9212);let q=(()=>{var n;class l{constructor(e,o){this.modalController=e,this.formBuilder=o}ngOnInit(){this.formularioPipa=this.formBuilder.group({clave_pipa:[this.pipa.clave_pipa,t.kI.required],responsable_pipa:[this.pipa.responsable_pipa,t.kI.required],capacidad_pipa:[this.pipa.capacidad_pipa,t.kI.required],localizacion_descripcion_pipa:[this.pipa.localizacion_descripcion_pipa,t.kI.required],vigencia_calibracion_tanque:[this.pipa.vigencia_calibracion_tanque,t.kI.required],capacidad_operativa:[this.pipa.capacidad_operativa,t.kI.required],capacidad_util:[this.pipa.capacidad_util,t.kI.required],capacidad_fondaje:[this.pipa.capacidad_fondaje,t.kI.required],volumen_minimo_operacion:[this.pipa.volumen_minimo_operacion,t.kI.required],estado_tanque:[this.pipa.estado_tanque,t.kI.required]})}cerrarModal(){this.modalController.dismiss()}guardarCambios(){this.modalController.dismiss(this.formularioPipa.value)}}return(n=l).\u0275fac=function(e){return new(e||n)(a.Y36(i.IN),a.Y36(t.qu))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-editar-pipa"]],inputs:{pipa:"pipa"},standalone:!0,features:[a.jDz],decls:53,vars:3,consts:[[2,"--background","#2c3d50"],[2,"color","white"],["slot","end"],[2,"color","white",3,"strong","click"],[1,"ion-padding"],["color","warning",1,"text-center"],[3,"formGroup","submit"],[1,"row"],[1,"col-md-6"],["label","Clave autotanque","labelPlacement","floating","formControlName","clave_pipa","type","text","placeholder","Ingrese la clave del autotanque"],["label","Responsable","labelPlacement","floating","formControlName","responsable_pipa","type","text","placeholder","Ingrese el nombre del responsable"],["label","Localizaci\xf3n y descripci\xf3n","labelPlacement","floating","formControlName","localizacion_descripcion_pipa","placeholder","Ingrese la descripci\xf3n de la pipa",3,"autoGrow"],["label","Capacidad","labelPlacement","floating","formControlName","capacidad_pipa","type","number","placeholder","Ingrese la capcidad en Litros de la pipa"],["label","Vigencia de calibraci\xf3n del autotanque","labelPlacement","floating","formControlName","vigencia_calibracion_tanque","type","date","placeholder","Ingrese la \xfaltima fecha en la que se calibr\xf3"],["label","Capacidad operativa","labelPlacement","floating","formControlName","capacidad_operativa","type","number","placeholder","Cantidad m\xe1xima en la que opera la unidad"],["label","Capacidad \xfatil","labelPlacement","floating","formControlName","capacidad_util","type","number","placeholder","Cantidad \xfatil en la que opera la unidad"],["label","Capacidad fondaje","labelPlacement","floating","formControlName","capacidad_fondaje","type","number","placeholder","Cantidad fondaje en la que opera la unidad"],["label","Valor minimo de operaci\xf3n","labelPlacement","floating","formControlName","volumen_minimo_operacion","type","number","placeholder","Cantidad m\xednima en la que opera la unidad"],["label","Estado del autotanque","labelPlacement","floating","formControlName","estado_tanque","placeholder","Estado del autotanque"],["value","O"],["value","F"],["type","submit","expand","full",2,"margin-top","5%"]],template:function(e,o){1&e&&(a.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),a._uU(3,"Editar Pipa"),a.qZA(),a.TgZ(4,"ion-buttons",2)(5,"ion-button",3),a.NdJ("click",function(){return o.cerrarModal()}),a._uU(6,"Cancelar"),a.qZA()()()(),a.TgZ(7,"ion-content",4)(8,"ion-card",5)(9,"ion-card-header")(10,"ion-card-title"),a._uU(11,"Editar Pipa"),a.qZA(),a.TgZ(12,"ion-card-subtitle"),a._uU(13,"Favor de ingresar la informaci\xf3n correspondiente para editar la pipa"),a.qZA()()(),a.TgZ(14,"form",6),a.NdJ("submit",function(){return o.guardarCambios()}),a.TgZ(15,"div",7)(16,"div",8)(17,"ion-item"),a._UZ(18,"ion-input",9),a.qZA()(),a.TgZ(19,"div",8)(20,"ion-item"),a._UZ(21,"ion-input",10),a.qZA()()(),a.TgZ(22,"ion-item"),a._UZ(23,"ion-textarea",11),a.qZA(),a.TgZ(24,"div",7)(25,"div",8)(26,"ion-item"),a._UZ(27,"ion-input",12),a.qZA()(),a.TgZ(28,"div",8)(29,"ion-item"),a._UZ(30,"ion-input",13),a.qZA()()(),a.TgZ(31,"div",7)(32,"div",8)(33,"ion-item"),a._UZ(34,"ion-input",14),a.qZA()(),a.TgZ(35,"div",8)(36,"ion-item"),a._UZ(37,"ion-input",15),a.qZA()()(),a.TgZ(38,"div",7)(39,"div",8)(40,"ion-item"),a._UZ(41,"ion-input",16),a.qZA()(),a.TgZ(42,"div",8)(43,"ion-item"),a._UZ(44,"ion-input",17),a.qZA()()(),a.TgZ(45,"ion-item")(46,"ion-select",18)(47,"ion-select-option",19),a._uU(48,"En operaci\xf3n"),a.qZA(),a.TgZ(49,"ion-select-option",20),a._uU(50,"Fuera de operaci\xf3n"),a.qZA()()(),a.TgZ(51,"ion-button",21),a._uU(52,"Guardar Cambios"),a.qZA()()()),2&e&&(a.xp6(5),a.Q6J("strong",!0),a.xp6(9),a.Q6J("formGroup",o.formularioPipa),a.xp6(9),a.Q6J("autoGrow",!0))},dependencies:[v.ez,t.u5,t._Y,t.JJ,t.JL,i.Pc,i.YG,i.Sm,i.PM,i.Zi,i.tO,i.Dq,i.W2,i.Gu,i.pK,i.Ie,i.t9,i.n0,i.g2,i.wd,i.sr,i.as,i.QI,i.j9,t.UX,t.sg,t.u]}),l})();var P=c(8056),C=c(4228);function T(n,l){if(1&n){const r=a.EpF();a.TgZ(0,"ion-header")(1,"ion-toolbar",11),a._UZ(2,"ion-buttons",12),a.TgZ(3,"ion-buttons",13)(4,"ion-button",14),a.NdJ("click",function(){a.CHM(r);const o=a.oxw();return a.KtG(o.cancel())}),a._uU(5,"Cancelar"),a.qZA()()()(),a.TgZ(6,"ion-content",15)(7,"ion-card",16)(8,"ion-card-header")(9,"ion-card-title"),a._uU(10,"Registro de pipa"),a.qZA(),a.TgZ(11,"ion-card-subtitle"),a._uU(12,"Favor de ingresar la infromaci\xf3n correspondiente para registrar un pipa"),a.qZA()()(),a.TgZ(13,"form",17),a.NdJ("ngSubmit",function(){a.CHM(r);const o=a.oxw();return a.KtG(o.onSubmit())}),a.TgZ(14,"div",3)(15,"div",18)(16,"ion-item"),a._UZ(17,"ion-input",19),a.qZA()(),a.TgZ(18,"div",18)(19,"ion-item"),a._UZ(20,"ion-input",20),a.qZA()()(),a.TgZ(21,"ion-item"),a._UZ(22,"ion-textarea",21),a.qZA(),a.TgZ(23,"div",3)(24,"div",18)(25,"ion-item"),a._UZ(26,"ion-input",22),a.qZA()(),a.TgZ(27,"div",18)(28,"ion-item"),a._UZ(29,"ion-input",23),a.qZA()()(),a.TgZ(30,"div",3)(31,"div",18)(32,"ion-item"),a._UZ(33,"ion-input",24),a.qZA()(),a.TgZ(34,"div",18)(35,"ion-item"),a._UZ(36,"ion-input",25),a.qZA()()(),a.TgZ(37,"div",3)(38,"div",18)(39,"ion-item"),a._UZ(40,"ion-input",26),a.qZA()(),a.TgZ(41,"div",18)(42,"ion-item"),a._UZ(43,"ion-input",27),a.qZA()()(),a.TgZ(44,"ion-item")(45,"ion-select",28)(46,"ion-select-option",29),a._uU(47,"En operaci\xf3n"),a.qZA(),a.TgZ(48,"ion-select-option",30),a._uU(49,"Fuera de operaci\xf3n"),a.qZA()()(),a.TgZ(50,"ion-button",31),a._uU(51,"Guardar"),a.qZA()()()}if(2&n){const r=a.oxw();a.xp6(4),a.Q6J("strong",!0),a.xp6(9),a.Q6J("formGroup",r.formularioPipa),a.xp6(9),a.Q6J("autoGrow",!0)}}const A=[{path:"",component:(()=>{var n;class l{constructor(e,o,s,p,d,b,m,g){this.api=e,this.storage=o,this.modal=s,this.formBuilder=p,this.toastController=d,this.alertController=b,this.modalController=m,this.route=g}ngOnInit(){this.storage.getUserLogged()||(this.storage.logout(),this.route.navigate(["/login"],{replaceUrl:!0}))}ionViewDidEnter(){var e=this;return(0,u.Z)(function*(){yield e.getInformacion(),e.formularioPipa=e.formBuilder.group({id_planta:[e.token.user.id_planta,t.kI.required],clave_pipa:["",t.kI.required],localizacion_descripcion_pipa:["",t.kI.required],vigencia_calibracion_tanque:["",t.kI.required],responsable_pipa:["",t.kI.required],capacidad_pipa:["",t.kI.required],capacidad_operativa:["",t.kI.required],capacidad_util:["",t.kI.required],capacidad_fondaje:["",t.kI.required],volumen_minimo_operacion:["",t.kI.required],estado_tanque:["",t.kI.required]})})()}getInformacion(){var e=this;return(0,u.Z)(function*(){e.token=e.storage.getUserData(),(yield e.api.getPipas(e.token.token,e.token.user.id_planta)).subscribe(o=>{e.pipas=o,e.generarTablaPipa(o)})})()}presentToast(e,o,s){var p=this;return(0,u.Z)(function*(){yield(yield p.toastController.create({message:o,duration:1500,position:e,color:s})).present()})()}generarTablaPipa(e){var o=this;return(0,u.Z)(function*(){setTimeout(()=>{},300),new h.Z("#listaPipas",{language:{url:"/assets/utils/es-ES.json"},columns:[{data:"clave_pipa",title:"Matricula"},{data:"responsable_pipa",title:"Responsable"},{data:"capacidad_pipa",title:"Capacidad"},{title:"Operaciones",orderable:!1,searchable:!1,data:null}],data:e,createdRow:(p,d,b)=>{const m=document.createElement("ion-button");m.setAttribute("size","small"),m.innerHTML='<ion-icon name="create"></ion-icon>',m.addEventListener("click",()=>o.abrirModalEditarPipa(d.id)),m.style.marginRight="15%";const g=document.createElement("ion-button");g.setAttribute("size","small"),g.setAttribute("color","danger"),g.innerHTML='<ion-icon name="trash"></ion-icon>',g.addEventListener("click",()=>o.eliminarPipa(d.id));const _=p.getElementsByTagName("td")[3];_.innerHTML="",_.appendChild(m),_.appendChild(g)}})})()}abrirModalEditarPipa(e){var o=this;return(0,u.Z)(function*(){const s=o.pipas.find(b=>b.id===e),p=yield o.modalController.create({component:q,componentProps:{pipa:s}});yield p.present();const{data:d}=yield p.onWillDismiss();d&&(yield o.api.editPipa(e,d,o.token.token)).subscribe(b=>{o.presentToast("bottom","Registro editado correctamente","success"),setTimeout(()=>{window.location.reload()},1e3)})})()}eliminarPipa(e){var o=this;return(0,u.Z)(function*(){var p;yield(yield o.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar este registro?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Eliminaci\xf3n cancelada")}},{text:"Eliminar",handler:(p=(0,u.Z)(function*(){try{(yield o.api.deletePipa(e,o.token.token)).subscribe(d=>{o.presentToast("bottom","Registro eliminado correctamente","success"),window.location.reload()})}catch(d){console.error("Error al eliminar el registro",d),o.presentToast("bottom","Error al eliminar el registro","danger")}}),function(){return p.apply(this,arguments)})}]})).present()})()}onSubmit(){var e=this;return(0,u.Z)(function*(){e.formularioPipa.valid?(yield e.api.createPipa(e.formularioPipa.value,e.token.token)).subscribe({next:()=>{e.presentToast("bottom","Se agregado un registro!","success"),e.formularioPipa.reset(),window.location.reload(),e.modal.dismiss()},error:o=>{console.log("\u{1f680} ~ MostrarPage ~ err:",o),e.presentToast("bottom","Algo ha salido mal","danger")}}):console.log("El formulario no es v\xe1lido")})()}cancel(){this.modal.dismiss(null,"cancel")}}return(n=l).\u0275fac=function(e){return new(e||n)(a.Y36(P.Z),a.Y36(C.V),a.Y36(i.IN),a.Y36(t.qu),a.Y36(i.yF),a.Y36(i.Br),a.Y36(i.IN),a.Y36(f.F0))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-mostrar"]],decls:17,vars:1,consts:[[3,"fullscreen"],[1,"card","ion-margin","rounded"],[1,"card-hedaer","text-white","ion-padding",2,"background","#2c3d50"],[1,"row"],[1,"col-md-10","pt-2"],[1,"col-md-2",2,"text-align","center"],["id","agregarPipaModal","color","light"],["slot","start","name","add"],["trigger","agregarPipaModal"],[1,"table-responsive","p-2"],["id","listaPipas",1,"table"],[2,"--background","#2c3d50"],["slot","start"],["slot","end"],[2,"color","white",3,"strong","click"],[1,"ion-padding"],["color","warning",1,"text-center"],[3,"formGroup","ngSubmit"],[1,"col-md-6"],["label","Clave autotanque","labelPlacement","floating","formControlName","clave_pipa","type","text","placeholder","Ingrese la clave del autotanque"],["label","Responsable","labelPlacement","floating","formControlName","responsable_pipa","type","text","placeholder","Ingrese el nombre del responsable"],["label","Localizaci\xf3n y descripci\xf3n","labelPlacement","floating","formControlName","localizacion_descripcion_pipa","placeholder","Ingrese la descripci\xf3n de la pipa",3,"autoGrow"],["label","Capacidad","labelPlacement","floating","formControlName","capacidad_pipa","type","number","placeholder","Ingrese la capcidad en Litros de la pipa"],["label","Vigencia de calibraci\xf3n del autotanque","labelPlacement","floating","formControlName","vigencia_calibracion_tanque","type","date","placeholder","Ingrese la \xfaltima fecha en la que se calibr\xf3"],["label","Capacidad operativa","labelPlacement","floating","formControlName","capacidad_operativa","type","number","placeholder","Cantidad m\xe1xima en la que opera la unidad"],["label","Capacidad \xfatil","labelPlacement","floating","formControlName","capacidad_util","type","number","placeholder","Cantidad \xfatil en la que opera la unidad"],["label","Capacidad fondaje","labelPlacement","floating","formControlName","capacidad_fondaje","type","number","placeholder","Cantidad fondaje en la que opera la unidad"],["label","Valor minimo de operaci\xf3n","labelPlacement","floating","formControlName","volumen_minimo_operacion","type","number","placeholder","Cantidad m\xednima en la que opera la unidad"],["label","Estado del autotanque","labelPlacement","floating","formControlName","estado_tanque","placeholder","Estado del autotanque"],["value","O"],["value","F"],["type","submit","expand","full",2,"padding-top","2%"]],template:function(e,o){1&e&&(a.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),a._uU(6,"Lista de pipas disponibles"),a.qZA()(),a.TgZ(7,"div",5)(8,"ion-button",6),a._UZ(9,"ion-icon",7),a._uU(10," Agregar "),a._UZ(11,"br"),a._uU(12," Pipa "),a.qZA(),a.TgZ(13,"ion-modal",8),a.YNc(14,T,52,3,"ng-template"),a.qZA()()()(),a.TgZ(15,"div",9),a._UZ(16,"table",10),a.qZA()()()),2&e&&a.Q6J("fullscreen",!0)},dependencies:[t._Y,t.JJ,t.JL,i.YG,i.Sm,i.PM,i.Zi,i.tO,i.Dq,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.t9,i.n0,i.g2,i.sr,i.ki,i.as,i.QI,i.j9,t.sg,t.u]}),l})()}];let y=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[f.Bz.forChild(A),f.Bz]}),l})(),I=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[v.ez,t.u5,i.Pc,y,t.UX]}),l})()}}]);