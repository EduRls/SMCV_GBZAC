"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[360],{360:(E,v,d)=>{d.r(v),d.d(v,{MostrarPageModule:()=>C});var b=d(6814),n=d(95),o=d(9810),Z=d(1147),l=d(5861),T=d(203),e=d(9212),h=d(4228);let B=(()=>{var a;class c{constructor(t,r,i,u){this.formBuilder=t,this.modalController=r,this.toastController=i,this.storage=u}ngOnInit(){var t=this;return(0,l.Z)(function*(){yield t.getInformacion(),yield t.generFormaulario()})()}getInformacion(){var t=this;return(0,l.Z)(function*(){t.userToken=yield t.storage.getUserData()})()}generFormaulario(){var t=this;return(0,l.Z)(function*(){t.formularioBitacora=t.formBuilder.group({NumeroRegistro:[t.registroBitacora.NumeroRegistro,n.kI.required],FechaYHoraEvento:[t.registroBitacora.FechaYHoraEvento,n.kI.required],UsuarioResponsable:[t.registroBitacora.UsuarioResponsable,n.kI.required],TipoEvento:[t.registroBitacora.TipoEvento,n.kI.required],DescripcionEvento:[t.registroBitacora.DescripcionEvento,n.kI.required],IdentificacionComponenteAlarma:[t.registroBitacora.IdentificacionComponenteAlarma,n.kI.required]})})()}cerrarModal(){var t=this;return(0,l.Z)(function*(){t.modalController.dismiss()})()}onSubmit(){var t=this;return(0,l.Z)(function*(){t.formularioBitacora.valid?t.modalController.dismiss(t.formularioBitacora.value):t.presentToast("bottom","Favor de verificar los campos","warning")})()}presentToast(t,r,i){var u=this;return(0,l.Z)(function*(){yield(yield u.toastController.create({message:r,duration:1500,position:t,color:i})).present()})()}}return(a=c).\u0275fac=function(t){return new(t||a)(e.Y36(n.qu),e.Y36(o.IN),e.Y36(o.yF),e.Y36(h.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-editar-registro-bitacora"]],inputs:{registroBitacora:"registroBitacora"},standalone:!0,features:[e.jDz],decls:25,vars:3,consts:[[2,"--background","#2c3d50"],[2,"color","white"],["slot","end"],[2,"color","white",3,"strong","click"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],["label","N\xfamero de evento","labelPlacement","floating","formControlName","NumeroRegistro","type","text","placeholder","Ingrese el n\xfamero del evento"],["label","Usuario responsable","labelPlacement","floating","formControlName","UsuarioResponsable","type","text","placeholder","Ingrese el usuario responsable"],["label","Tipo de evento","labelPlacement","floating","formControlName","TipoEvento","type","text","placeholder","Ingrese el tipo de evento"],["label","Descripci\xf3n del evento","labelPlacement","floating","formControlName","DescripcionEvento","type","text","placeholder","Ingrese la descrci\xf3n del evento",3,"autoGrow"],["label","Identificaci\xf3n de la alarma","labelPlacement","floating","formControlName","IdentificacionComponenteAlarma","type","text","placeholder","Ingrese alarma"],["locale","es-ES","formControlName","FechaYHoraEvento"],["type","submit","expand","full",2,"padding-top","2%"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Editar registro"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){return r.cerrarModal()}),e._uU(6,"Cancelar"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",4),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(9,"div",5)(10,"div",6)(11,"ion-item"),e._UZ(12,"ion-input",7),e.qZA(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",8),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-input",9),e.qZA(),e.TgZ(17,"ion-item"),e._UZ(18,"ion-textarea",10),e.qZA(),e.TgZ(19,"ion-item"),e._UZ(20,"ion-input",11),e.qZA()(),e.TgZ(21,"div",6),e._UZ(22,"ion-datetime",12),e.qZA()(),e.TgZ(23,"ion-button",13),e._uU(24,"Guardar"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("strong",!0),e.xp6(3),e.Q6J("formGroup",r.formularioBitacora),e.xp6(10),e.Q6J("autoGrow",!0))},dependencies:[b.ez,n.u5,n._Y,n.JJ,n.JL,o.Pc,o.YG,o.Sm,o.W2,o.x4,o.Gu,o.pK,o.Ie,o.g2,o.wd,o.sr,o.QI,o.j9,n.UX,n.sg,n.u]}),c})();var _=d(8056);function U(a,c){if(1&a){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",11),e._UZ(2,"ion-buttons",12),e.TgZ(3,"ion-buttons",13)(4,"ion-button",14),e.NdJ("click",function(){e.CHM(s);const r=e.oxw();return e.KtG(r.cancel())}),e._uU(5,"Cancelar"),e.qZA()()()(),e.TgZ(6,"ion-content",15)(7,"ion-card",16)(8,"ion-card-header")(9,"ion-card-title"),e._uU(10,"Registro de evento"),e.qZA(),e.TgZ(11,"ion-card-subtitle"),e._uU(12,"Favor de ingresar la infromaci\xf3n correspondiente para registrar un evento"),e.qZA()()(),e.TgZ(13,"form",17),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.oxw();return e.KtG(r.onSubmit())}),e.TgZ(14,"div",3)(15,"div",18)(16,"ion-item"),e._UZ(17,"ion-input",19),e.qZA(),e.TgZ(18,"ion-item"),e._UZ(19,"ion-input",20),e.qZA(),e.TgZ(20,"ion-item"),e._UZ(21,"ion-input",21),e.qZA(),e.TgZ(22,"ion-item"),e._UZ(23,"ion-textarea",22),e.qZA(),e.TgZ(24,"ion-item"),e._UZ(25,"ion-input",23),e.qZA()(),e.TgZ(26,"div",18),e._UZ(27,"ion-datetime",24),e.qZA()(),e.TgZ(28,"ion-button",25),e._uU(29,"Guardar"),e.qZA()()()}if(2&a){const s=e.oxw();e.xp6(4),e.Q6J("strong",!0),e.xp6(9),e.Q6J("formGroup",s.formularioBitacora),e.xp6(10),e.Q6J("autoGrow",!0)}}const y=[{path:"",component:(()=>{var a;class c{constructor(t,r,i,u,m){this.modal=t,this.formBuilder=r,this.toastController=i,this.api=u,this.storage=m}ngOnInit(){var t=this;return(0,l.Z)(function*(){yield t.getInformacion(),yield t.generFormaulario()})()}getInformacion(){var t=this;return(0,l.Z)(function*(){t.userToken=t.storage.getUserData(),(yield t.api.getBitacoraEvento(t.userToken.token,t.userToken.user.id_planta)).subscribe({next:r=>{t.infoBitactora=r,t.generarTablaBitacora(t.infoBitactora)},error:r=>{console.log(r)}})})()}generarTablaBitacora(t){var r=this;return(0,l.Z)(function*(){setTimeout(()=>{},300),new T.Z("#listaBitacora",{language:{url:"/assets/utils/es-ES.json"},columns:[{data:"NumeroRegistro",title:"N\xfamero de registro"},{data:"FechaYHoraEvento",title:"Fecha del evento"},{data:"UsuarioResponsable",title:"Usuario"},{data:"TipoEvento",title:"Tipo de evento"},{title:"Operaciones",orderable:!1,searchable:!1,data:null}],data:t,createdRow:(u,m,x)=>{const g=document.createElement("ion-button");g.setAttribute("size","small"),g.innerHTML='<ion-icon name="create"></ion-icon>',g.addEventListener("click",()=>r.abrirModalEditarBitacora(m)),g.style.marginRight="15%";const p=document.createElement("ion-button");p.setAttribute("size","small"),p.setAttribute("color","danger"),p.innerHTML='<ion-icon name="trash"></ion-icon>',p.addEventListener("click",()=>r.eliminarBitacora(m.id));const f=u.getElementsByTagName("td")[4];f.innerHTML="",f.appendChild(g),f.appendChild(p)}}).draw()})()}abrirModalEditarBitacora(t){var r=this;return(0,l.Z)(function*(){const i=yield r.modal.create({component:B,componentProps:{registroBitacora:t}});yield i.present();const{data:u}=yield i.onWillDismiss();u&&(yield r.api.editBitacoraEvento(t.id,u,r.userToken.token)).subscribe({next:m=>{r.presentToast("bottom","Se ha editado el registro","success"),setTimeout(()=>{window.location.reload()},1e3)},error:m=>{console.log(m)}})})()}eliminarBitacora(t){var r=this;return(0,l.Z)(function*(){(yield r.api.deleteBitacoraEvento(t,r.userToken.token)).subscribe({next:i=>{r.presentToast("bottom","Se ha eliminado un registro","danger"),setTimeout(()=>{window.location.reload()},300)},error:i=>{r.presentToast("bottom","Algo ha salido mal","danger")}})})()}generFormaulario(){var t=this;return(0,l.Z)(function*(){t.formularioBitacora=t.formBuilder.group({id_planta:[t.userToken.user.id_planta,n.kI.required],NumeroRegistro:[],FechaYHoraEvento:[],UsuarioResponsable:[],TipoEvento:[],DescripcionEvento:[],IdentificacionComponenteAlarma:[]})})()}presentToast(t,r,i){var u=this;return(0,l.Z)(function*(){yield(yield u.toastController.create({message:r,duration:1500,position:t,color:i})).present()})()}onSubmit(){var t=this;return(0,l.Z)(function*(){t.formularioBitacora.valid?(yield t.api.createBitacoraEvento(t.formularioBitacora.value,t.userToken.token)).subscribe({next:r=>{t.presentToast("bottom","Se ha creado un nuevo registro","success"),setTimeout(()=>{window.location.reload()},300)},error:r=>{t.presentToast("bottom","Algo ha salido mal","danger")}}):t.presentToast("bottom","Favor de verificar los campos","warning")})()}cancel(){this.modal.dismiss(null,"cancel")}}return(a=c).\u0275fac=function(t){return new(t||a)(e.Y36(o.IN),e.Y36(n.qu),e.Y36(o.yF),e.Y36(_.Z),e.Y36(h.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mostrar"]],decls:17,vars:1,consts:[[3,"fullscreen"],[1,"card","ion-margin","rounded"],[1,"card-hedaer","text-white","ion-padding",2,"background","#2c3d50"],[1,"row"],[1,"col-md-10","pt-2"],[1,"col-md-2",2,"text-align","center"],["id","agregarUsuarioModal","color","light"],["slot","start","name","add"],["trigger","agregarUsuarioModal"],[1,"table-responsive","p-2"],["id","listaBitacora",1,"table"],[2,"--background","#2c3d50"],["slot","start"],["slot","end"],[2,"color","white",3,"strong","click"],[1,"ion-padding"],["color","warning",1,"text-center"],[3,"formGroup","ngSubmit"],[1,"col-md-6"],["label","N\xfamero de evento","labelPlacement","floating","formControlName","NumeroRegistro","type","text","placeholder","Ingrese el n\xfamero del evento"],["label","Usuario responsable","labelPlacement","floating","formControlName","UsuarioResponsable","type","text","placeholder","Ingrese el usuario responsable"],["label","Tipo de evento","labelPlacement","floating","formControlName","TipoEvento","type","text","placeholder","Ingrese el tipo de evento"],["label","Descripci\xf3n del evento","labelPlacement","floating","formControlName","DescripcionEvento","type","text","placeholder","Ingrese la descrci\xf3n del evento",3,"autoGrow"],["label","Identificaci\xf3n de la alarma","labelPlacement","floating","formControlName","IdentificacionComponenteAlarma","type","text","placeholder","Ingrese alarma"],["locale","es-ES","formControlName","FechaYHoraEvento"],["type","submit","expand","full",2,"padding-top","2%"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Lista de eventos/bitacora"),e.qZA()(),e.TgZ(7,"div",5)(8,"ion-button",6),e._UZ(9,"ion-icon",7),e._uU(10," Agregar "),e._UZ(11,"br"),e._uU(12," evento "),e.qZA(),e.TgZ(13,"ion-modal",8),e.YNc(14,U,30,3,"ng-template"),e.qZA()()()(),e.TgZ(15,"div",9),e._UZ(16,"table",10),e.qZA()()()),2&t&&e.Q6J("fullscreen",!0)},dependencies:[n._Y,n.JJ,n.JL,o.YG,o.Sm,o.PM,o.Zi,o.tO,o.Dq,o.W2,o.x4,o.Gu,o.gu,o.pK,o.Ie,o.g2,o.sr,o.ki,o.QI,o.j9,n.sg,n.u]}),c})()}];let A=(()=>{var a;class c{}return(a=c).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Z.Bz.forChild(y),Z.Bz]}),c})(),C=(()=>{var a;class c{}return(a=c).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[b.ez,n.u5,o.Pc,A,n.UX]}),c})()}}]);