"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5368],{5368:(k,T,d)=>{d.r(T),d.d(T,{RegistrarPageModule:()=>x});var v=d(6814),r=d(95),i=d(9810),Z=d(1147),g=d(5861),_=d(203),e=d(9212);let q=(()=>{var a;class s{constructor(o,t){this.formBuilder=o,this.modalController=t}ngOnInit(){this.formularioEditarMedidorTurbina=this.formBuilder.group({modelo_equipo:[this.medidor[0].modelo_equipo,r.kI.required],rango_flujo:[this.medidor[0].rango_flujo,r.kI.required],rango_temperatura:[this.medidor[0].rango_temperatura,r.kI.required],numero_serie:[this.medidor[0].numero_serie,r.kI.required],precision:[this.medidor[0].precision,r.kI.required],suministro_energia:[this.medidor[0].suministro_energia,r.kI.required],salida_modelo:[this.medidor[0].salida_modelo,r.kI.required],fecha:[this.medidor[0].fecha,r.kI.required]})}cerrarModal(){}onSubmit(){this.modalController.dismiss(this.formularioEditarMedidorTurbina.value)}}return(a=s).\u0275fac=function(o){return new(o||a)(e.Y36(r.qu),e.Y36(i.IN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-editar-medidor"]],inputs:{medidor:"medidor"},standalone:!0,features:[e.jDz],decls:39,vars:2,consts:[[2,"--background","#2c3d50"],[2,"color","white"],["slot","end"],[2,"color","white",3,"strong","click"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],["label","Modelo","labelPlacement","floating","formControlName","modelo_equipo","type","text","placeholder","Ingrese el modelo del equipo."],["label","Rango de flujo","labelPlacement","floating","formControlName","rango_flujo","type","text","placeholder","Ingrese el rango de flujo"],["label","Rengo de temperatura","labelPlacement","floating","formControlName","rango_temperatura","type","text","placeholder","Ingrese la capcidad en Litros de la pipa"],["label","N\xfamero de serie","labelPlacement","floating","formControlName","numero_serie","type","text","placeholder","Ingrese el n\xfamero de serie."],["label","Precisi\xf3n","labelPlacement","floating","formControlName","precision","type","text","placeholder","Ingrese el rango de exactitud."],["label","Energ\xeda requerida","labelPlacement","floating","formControlName","suministro_energia","type","text","placeholder","Cantidad de energ\xeda que funcion\xe9 el medidor."],["label","Modelo de salida","labelPlacement","floating","formControlName","salida_modelo","type","text","placeholder","Cantidad de energ\xeda que funcion\xe9 el medidor."],["label","Fecha del modelo","labelPlacement","floating","formControlName","fecha","type","text","placeholder","Fecha del medidor de turbina."],["type","submit","expand","full",2,"padding-top","5%"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"Editar Medidor"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){return t.cerrarModal()}),e._uU(6,"Cancelar"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",4),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(9,"div",5)(10,"div",6)(11,"ion-item"),e._UZ(12,"ion-input",7),e.qZA()(),e.TgZ(13,"div",6)(14,"ion-item"),e._UZ(15,"ion-input",8),e.qZA()()(),e.TgZ(16,"div",5)(17,"div",6)(18,"ion-item"),e._UZ(19,"ion-input",9),e.qZA()(),e.TgZ(20,"div",6)(21,"ion-item"),e._UZ(22,"ion-input",10),e.qZA()()(),e.TgZ(23,"div",5)(24,"div",6)(25,"ion-item"),e._UZ(26,"ion-input",11),e.qZA()(),e.TgZ(27,"div",6)(28,"ion-item"),e._UZ(29,"ion-input",12),e.qZA()()(),e.TgZ(30,"div",5)(31,"div",6)(32,"ion-item"),e._UZ(33,"ion-input",13),e.qZA()(),e.TgZ(34,"div",6)(35,"ion-item"),e._UZ(36,"ion-input",14),e.qZA()()(),e.TgZ(37,"ion-button",15),e._uU(38,"Guardar"),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("strong",!0),e.xp6(3),e.Q6J("formGroup",t.formularioEditarMedidorTurbina))},dependencies:[i.Pc,i.YG,i.Sm,i.W2,i.Gu,i.pK,i.Ie,i.wd,i.sr,i.j9,v.ez,r.u5,r._Y,r.JJ,r.JL,r.UX,r.sg,r.u]}),s})();var M=d(7574),y=d(8056),P=d(4228);function A(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",11),e._UZ(2,"ion-buttons",12),e.TgZ(3,"ion-buttons",13)(4,"ion-button",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.cancel())}),e._uU(5,"Cancelar"),e.qZA()()()(),e.TgZ(6,"ion-content",15)(7,"ion-card",16)(8,"ion-card-header")(9,"ion-card-title"),e._uU(10,"Registro del equipo"),e.qZA(),e.TgZ(11,"ion-card-subtitle"),e._uU(12,"Favor de ingresar la infromaci\xf3n correspondiente para registrar un nuevo medidor de turbina"),e.qZA()()(),e.TgZ(13,"form",17),e.NdJ("ngSubmit",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.onSubmit())}),e.TgZ(14,"div",3)(15,"div",18)(16,"ion-item"),e._UZ(17,"ion-input",19),e.qZA()(),e.TgZ(18,"div",18)(19,"ion-item"),e._UZ(20,"ion-input",20),e.qZA()()(),e.TgZ(21,"div",3)(22,"div",18)(23,"ion-item"),e._UZ(24,"ion-input",21),e.qZA()(),e.TgZ(25,"div",18)(26,"ion-item"),e._UZ(27,"ion-input",22),e.qZA()()(),e.TgZ(28,"div",3)(29,"div",18)(30,"ion-item"),e._UZ(31,"ion-input",23),e.qZA()(),e.TgZ(32,"div",18)(33,"ion-item"),e._UZ(34,"ion-input",24),e.qZA()()(),e.TgZ(35,"div",3)(36,"div",18)(37,"ion-item"),e._UZ(38,"ion-input",25),e.qZA()(),e.TgZ(39,"div",18)(40,"ion-item"),e._UZ(41,"ion-input",26),e.qZA()()(),e.TgZ(42,"ion-button",27),e._uU(43,"Guardar"),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(4),e.Q6J("strong",!0),e.xp6(9),e.Q6J("formGroup",n.formularioMedidorTurbina)}}const E=[{path:"",component:(()=>{var a;class s{constructor(o,t,l,c,u,m){this.apiLaravel=o,this.toastController=t,this.storage=l,this.route=c,this.formBuilder=u,this.modal=m,this.equipo=[]}ngOnInit(){this.storage.getUserLogged()||(this.storage.logout(),this.route.navigate(["/login"],{replaceUrl:!0}))}ionViewDidEnter(){this.obtenerInformacion(),this.generarFormaulario()}generarFormaulario(){var o=this;return(0,g.Z)(function*(){o.formularioMedidorTurbina=o.formBuilder.group({id_planta:[o.bearerToken.user.id_planta,r.kI.required],modelo_equipo:["",r.kI.required],rango_flujo:["",r.kI.required],rango_temperatura:["",r.kI.required],numero_serie:["",r.kI.required],precision:["",r.kI.required],suministro_energia:["",r.kI.required],salida_modelo:["",r.kI.required],fecha:["",r.kI.required]})})()}presentToast(o,t,l){var c=this;return(0,g.Z)(function*(){yield(yield c.toastController.create({message:t,duration:1500,position:o,color:l})).present()})()}obtenerInformacion(){var o=this;return(0,g.Z)(function*(){o.bearerToken=o.storage.getUserData(),(yield o.apiLaravel.getMedidoresTurbian(o.bearerToken.token,o.bearerToken.user.id_planta)).subscribe(t=>{o.generaTablaMedidores(t),o.equipo=t})})()}generaTablaMedidores(o){var t=this;return(0,g.Z)(function*(){new _.Z("#listaEquiposTurbina",{language:{url:"/assets/utils/es-ES.json"},columns:[{data:"modelo_equipo",title:"Modelo"},{data:"rango_flujo",title:"R. Flujo"},{data:"rango_temperatura",title:"R. Temp"},{data:"numero_serie",title:"No. Serie"},{data:"precision",title:"Precisi\xf3n"},{data:"suministro_energia",title:"S. Energ\xeda"},{data:"salida_modelo",title:"S. Modelo"},{data:"fecha",title:"Fecha"},{title:"Operaciones",orderable:!1,searchable:!1,data:null}],data:o,createdRow:(c,u,m)=>{const p=document.createElement("ion-button");p.setAttribute("size","small"),p.innerHTML='<ion-icon name="create"></ion-icon>',p.addEventListener("click",()=>t.abrirModalEditarMedidor(u.id)),p.style.marginRight="5%";const b=document.createElement("ion-button");b.setAttribute("size","small"),b.setAttribute("color","secondary"),b.innerHTML='<ion-icon name="hammer"></ion-icon>',b.addEventListener("click",()=>t.generarMantnimiento(u.id));const f=document.createElement("ion-button");f.setAttribute("size","small"),f.setAttribute("color","danger"),f.innerHTML='<ion-icon name="trash"></ion-icon>',f.addEventListener("click",()=>t.eliminarPipa(u.id));const h=c.getElementsByTagName("td")[8];h.innerHTML="",h.appendChild(p),h.appendChild(b),h.appendChild(f)}})})()}generarMantnimiento(o){var t=this;return(0,g.Z)(function*(){const l=t.equipo.filter(m=>m.id===o),c=yield t.modal.create({component:M.S,componentProps:{mTurbina:l}});yield c.present();const{data:u}=yield c.onWillDismiss();u&&(yield t.apiLaravel.createRegistroMantenimientoMedidor(u,t.bearerToken.token)).subscribe({next:m=>{t.presentToast("bottom","Se ha generado un registro de mantenimiento!","success")},error:m=>{t.presentToast("bottom","Algo ha salido mal","danger")}})})()}eliminarPipa(o){var t=this;return(0,g.Z)(function*(){(yield t.apiLaravel.deleteMedidorTurbina(o,t.bearerToken.token)).subscribe({next:l=>{console.log("\u{1f680} ~ RegistrarPage ~ val:",l),t.presentToast("bottom","Se ha eliminado un registro, exitosamente!","success"),setTimeout(()=>{window.location.reload()},300)},error:l=>{console.log("\u{1f680} ~ RegistrarPage ~ err:",l),t.presentToast("bottom","Ha ocurrido un error","danger")}})})()}abrirModalEditarMedidor(o){var t=this;return(0,g.Z)(function*(){const l=t.equipo.filter(m=>m.id===o),c=yield t.modal.create({component:q,componentProps:{medidor:l}});yield c.present();const{data:u}=yield c.onWillDismiss();u&&(yield t.apiLaravel.editMedidorTurbina(o,u,t.bearerToken.token)).subscribe({next:m=>{console.log(m),t.presentToast("bottom","Se ha actualizado un registro","success"),setTimeout(()=>{window.location.reload()},300)},error:m=>{console.log(m),t.presentToast("bottom","Algo ha salido mal","danger")}})})()}onSubmit(){var o=this;return(0,g.Z)(function*(){if(o.formularioMedidorTurbina.valid)try{(yield o.apiLaravel.createMedidorTurbina(o.formularioMedidorTurbina.value,o.bearerToken.token)).subscribe({next:t=>{console.log("\u{1f680} ~ RegistrarPage ~ value:",t),o.presentToast("bottom","El registro se ha agregado de forma \xe9xitosa!","success"),o.modal.dismiss(),o.formularioMedidorTurbina.reset(),setTimeout(()=>{window.location.reload()},1e3)},error:t=>{console.log("\u{1f680} ~ RegistrarPage ~ err:",t),o.presentToast("bottom","Hubo un error, por favor, vuelva a intentarlo","danger")}})}catch{o.presentToast("bottom","Hubo un error, por favor, vuelva a intentarlo","danger")}else o.presentToast("bottom","Favor de completar los campos","warning")})()}cancel(){var o=this;return(0,g.Z)(function*(){o.modal.dismiss()})()}}return(a=s).\u0275fac=function(o){return new(o||a)(e.Y36(y.Z),e.Y36(i.yF),e.Y36(P.V),e.Y36(Z.F0),e.Y36(r.qu),e.Y36(i.IN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-registrar"]],decls:17,vars:1,consts:[[3,"fullscreen"],[1,"card","ion-margin","rounded"],[1,"card-hedaer","text-white","ion-padding",2,"background","#2c3d50"],[1,"row"],[1,"col-md-10","pt-2"],[1,"col-md-2",2,"text-align","center"],["id","agregarEquipoModal","color","light"],["slot","start","name","add"],["trigger","agregarEquipoModal"],[1,"table-responsive","p-2"],["id","listaEquiposTurbina",1,"table"],[2,"--background","#2c3d50"],["slot","start"],["slot","end"],[2,"color","white",3,"strong","click"],[1,"ion-padding"],["color","warning",1,"text-center"],[3,"formGroup","ngSubmit"],[1,"col-md-6"],["label","Modelo","labelPlacement","floating","formControlName","modelo_equipo","type","text","placeholder","Ingrese el modelo del equipo."],["label","Rango de flujo","labelPlacement","floating","formControlName","rango_flujo","type","text","placeholder","Ingrese el rango de flujo"],["label","Rengo de temperatura","labelPlacement","floating","formControlName","rango_temperatura","type","text","placeholder","Ingrese la capcidad en Litros de la pipa"],["label","N\xfamero de serie","labelPlacement","floating","formControlName","numero_serie","type","text","placeholder","Ingrese el n\xfamero de serie."],["label","Precisi\xf3n","labelPlacement","floating","formControlName","precision","type","text","placeholder","Ingrese el rango de exactitud."],["label","Energ\xeda requerida","labelPlacement","floating","formControlName","suministro_energia","type","text","placeholder","Cantidad de energ\xeda que funcion\xe9 el medidor."],["label","Modelo de salida","labelPlacement","floating","formControlName","salida_modelo","type","text","placeholder","Cantidad de energ\xeda que funcion\xe9 el medidor."],["label","Fecha del modelo","labelPlacement","floating","formControlName","fecha","type","text","placeholder","Fecha del medidor de turbina."],["type","submit","expand","full",2,"padding-top","5%"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Lista de equipos disponibles"),e.qZA()(),e.TgZ(7,"div",5)(8,"ion-button",6),e._UZ(9,"ion-icon",7),e._uU(10," Agregar "),e._UZ(11,"br"),e._uU(12," Equipo "),e.qZA(),e.TgZ(13,"ion-modal",8),e.YNc(14,A,44,2,"ng-template"),e.qZA()()()(),e.TgZ(15,"div",9),e._UZ(16,"table",10),e.qZA()()()),2&o&&e.Q6J("fullscreen",!0)},dependencies:[r._Y,r.JJ,r.JL,i.YG,i.Sm,i.PM,i.Zi,i.tO,i.Dq,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.sr,i.ki,i.j9,r.sg,r.u]}),s})()}];let C=(()=>{var a;class s{}return(a=s).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Z.Bz.forChild(E),Z.Bz]}),s})(),x=(()=>{var a;class s{}return(a=s).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[v.ez,r.u5,i.Pc,C,r.UX]}),s})()}}]);